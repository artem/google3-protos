syntax = "editions";

package bigtable;

import "storage/datapol/annotations/proto/semantic_annotations.proto";

option java_multiple_files = true;
option java_package = "com.google.bigtable.protos";

message DirectCatalog {
    
}

message CloudCatalog {
    optional string zone_id = 1;
    optional string zone_db_path = 2;
    optional string cluster_name = 3;
    optional int64 project_number = 4;
}

message Catalog {
    oneof catalog {
        DirectCatalog direct_catalog = 1;
        CloudCatalog cloud_catalog = 2;
    }
}

message MaterializedViewFeatures {
    optional bool enable_structured_keys = 1;
}

message MaterializedView {
    optional string view_name = 1;
    
    optional ViewQuery view_query = 2;
    message ViewQuery {
        optional string query = 1;
    }
    
    optional uint64 output_table_version = 3;
    optional string output_table_name = 4;
    repeated string output_column_families = 5;
    
    optional Status status = 6;
    enum Status {
        UNINITIALIZED = 0;
        BACKFILLING = 1;
        ACTIVE = 2;
        DELETING = 3;
    }
}

message MaterializedViewsConfig {
    repeated MaterializedView view_configs = 1;
}
